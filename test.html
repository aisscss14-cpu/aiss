<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lucky Number — Pola Gacor</title>
  <style>
    /* VARIBEL UTAMA */
    :root{
      --bg:#000000; 
      --card:#0a0a0c;
      --gold:#ffd700; 
      --gold-dark:#ccaa00;
      --muted:#888888;
      --success:#00ff99; 
      --danger:#ff4444; 
      --secondary-bg: #1c1c1f;
    }
    
    /* RESET & DASAR */
    * {box-sizing:border-box}
    body {
      margin:0;
      font-family:'Inter',system-ui,sans-serif;
      background:linear-gradient(180deg,#060608,#000000);
      color:#f0f0f0; 
      line-height:1.4; 
      min-height: 100vh;
    }
    .wrap{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 20px;
    }
    
    /* CARD UTAMA */
    .card{
      width:700px; 
      max-width:100%;
      background:var(--card);
      border-radius:15px;
      padding:25px;
      box-shadow:0 15px 50px rgba(0,0,0,0.8);
      border:1px solid rgba(255,255,255,0.15);
    }
    h1{
      margin:0;
      font-size:28px;
      color:var(--gold);
      letter-spacing:1.5px;
      font-weight:900;
      text-transform:uppercase;
      text-shadow:0 0 10px rgba(255,215,0,0.5);
    }
    p.lead{
      margin:5px 0 20px 0;
      color:var(--muted);
      font-size:14px;
    }

    /* INPUT DAN KONTROL */
    .box{
      background:var(--secondary-bg);
      padding:15px;
      border-radius:12px;
      margin-bottom:15px;
      box-shadow:inset 0 0 5px rgba(0,0,0,0.6);
    }
    .row{
      display:flex;
      gap:15px;
      align-items:flex-start;
      justify-content: space-between;
    }
    .input-group{
        display:flex;
        flex-direction:column;
        flex-grow: 1;
    }
    input.num{
      width:100%; 
      padding:10px 5px;
      border-radius:8px;
      border:1px solid #333;
      background:#000; 
      color:var(--gold);
      font-weight:800;
      font-size:20px;
      text-align:center;
      transition:box-shadow 0.2s, border 0.2s;
    }
    input.num:focus{
        border-color: var(--gold-dark);
        box-shadow:0 0 0 2px var(--gold);
        outline:none;
    }
    label.small{
      font-size:11px;
      color:var(--muted);
      margin-bottom:4px;
      font-weight:600;
      text-transform: uppercase;
    }
    .controls{
      display:flex;
      gap:10px;
      margin-top:15px;
      align-items:center;
    }
    button.btn{
      padding:10px 20px;
      border-radius:8px;
      border:0;
      font-weight:700;
      cursor:pointer;
      text-transform:uppercase;
      transition:transform 0.1s, opacity 0.1s;
      font-size: 14px;
    }
    .btn.primary{
      background:linear-gradient(90deg,var(--gold),var(--gold-dark));
      color:#000;
      box-shadow:0 4px 15px rgba(255,215,0,0.5);
    }
    .btn.ghost{
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.15);
      color:#fff;
    }

    /* DISPLAY SPIN */
    .display{
      display:flex;
      justify-content:center;
      gap:15px;
      margin-top:20px;
    }
    .slot{
      width:80px; 
      height:80px;
      border-radius:10px;
      background:linear-gradient(180deg,#151518, #000);
      border:2px solid var(--gold);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:40px;
      font-weight:900;
      color:var(--gold);
      box-shadow:0 0 10px rgba(255,215,0,0.5);
    }

    /* MODAL STYLES */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.95);
      backdrop-filter:blur(5px);
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      pointer-events:none;
      transition:opacity .3s;
    }
    .modal-backdrop.show{
      opacity:1;
      pointer-events:auto;
    }
    .modal{
      width:580px; 
      max-width:95%;
      background:linear-gradient(180deg, #18181b, #0a0a0c);
      border-radius:15px;
      padding:20px;
      box-shadow:0 25px 50px rgba(0,0,0,0.9);
      border:1px solid var(--gold-dark);
      transform:translateY(20px) scale(.95);
      transition:transform .4s, opacity .4s;
      opacity:0;
    }
    .modal.show{
      transform:translateY(0) scale(1);
      opacity:1;
    }
    .title{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:15px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 10px;
    }
    .popup-header .main-title{
        font-size:20px;
        color:#fff;
        font-weight:900;
        text-shadow:0 0 5px rgba(255,215,0,0.2);
    }
    .popup-header .sub-title{
        font-size:12px;
        color:var(--muted);
    }
    .close-x{
      background:transparent;
      border:0;
      color:var(--muted);
      font-size:24px;
      cursor:pointer;
      opacity:0.8;
      transition:opacity 0.2s;
    }
    .close-x:hover{
        opacity:1;
        color:#fff;
    }
    .popup-body{
      display:grid; 
      grid-template-columns: 1fr 200px; 
      gap:15px;
    }
    .popup-left{
      padding-right: 5px;
    }
    .popup-right{
      background:var(--secondary-bg);
      padding:15px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.05);
    }

    /* POLA GACOR LIST (KOLOM KIRI) */
    .pola-header {
        font-weight:700;
        color:var(--gold);
        font-size:16px;
        margin-bottom:8px;
        text-transform:uppercase;
    }
    .pola-title {
        font-weight:800;
        color:var(--success); 
        margin-top:15px;
        margin-bottom:6px;
        font-size:14px;
        padding-bottom:3px;
        border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .pola-item {
        padding:4px 8px; 
        font-size:13px; 
        color:#ccc;
        background:rgba(255,255,255,0.03);
        border-radius:4px;
        margin-bottom:5px;
        display:flex;
        justify-content:space-between;
        align-items: center;
    }
    .pola-item .indicator {
        font-weight:900;
        font-size:13px;
        padding-right:8px;
    }
    .pola-item .success {color:var(--success);}
    .pola-item .danger {color:var(--danger);}
    .pola-item.bet-info {
        background:var(--gold);
        color:#000; 
        font-weight:800;
        border:1px solid var(--gold);
        justify-content:center;
        font-size: 14px;
        padding: 5px 8px;
        margin-top: 8px;
    }
    .pola-item .buy-feature {
        color:var(--danger); 
        font-weight:900;
        text-transform: uppercase;
        padding: 0;
    }


    /* GAME HOKI LIST (KOLOM KANAN) */
    .games{
        background:#000; 
        padding:8px;
        border-radius:8px;
        border: 1px solid #333;
    }
    .games div{
        padding:6px 8px;
        border-radius:6px;
        margin-bottom:6px;
        background:#111115; 
        font-weight:600;
        color:#e0e0e0;
        border-left:3px solid var(--gold);
        font-size: 13px;
    }
    .games .provider{
        font-size:12px;
        color:var(--gold);
        margin-top:10px;
        margin-bottom:3px;
        font-weight: 900;
        background:transparent;
        padding:0;
        border-left: none;
        text-transform: uppercase;
    }
    .games .provider:first-child {
        margin-top:0;
    }
    
    /* DEPOSIT KODE UNIK */
    .deposit-box{
      background:var(--bg);
      padding:15px; 
      border-radius:10px;
      text-align:center;
      margin-top:20px;
      border:1px solid var(--gold-dark);
      box-shadow:0 0 10px rgba(255,215,0,0.3);
    }
    .deposit-box .amount{
      font-size:22px; 
      color:var(--success); 
      font-weight:900;
      display:block;
      margin-top:5px;
      text-shadow:0 0 10px rgba(0,255,153,0.5);
    }

    .disclaimer{
      font-size:10px; 
      color:#6b7280;
      margin-top:15px; 
      padding:7px;
      border-left:3px solid var(--danger);
      background:rgba(255, 68, 68, 0.1);
      border-radius:0 4px 4px 0;
    }

    /* RESPONSIF */
    @media (max-width:580px){
        .wrap{padding:20px 10px;}
        .card{padding:20px;}
        .row{gap:8px;}
        .input-group{flex-grow:1;}
        input.num{font-size:16px; padding:8px 4px;}
        .display .slot{width:65px; height:65px; font-size:30px;}
        
        .modal{padding:15px;}
        .popup-body{
            grid-template-columns: 1fr; 
            gap:15px;
        }
        .popup-right{width:100%;}
        .controls{flex-wrap:wrap;}
        .btn{flex-grow:1;}
        .pola-item{font-size: 12px; padding: 4px 6px;}
        .pola-title{font-size: 13px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ASH LUCKY NUMBER</h1>
      <p class="lead">Mainkan pola keberuntunganmu hari ini. Masukkan 4 angka lalu tekan **SPIN HOKI** untuk melihat pola GACOR.</p>

      <div class="box">
        <div style="color:var(--muted); margin-bottom:12px; font-weight:600; font-size:13px;">INPUT 4 ANGKA KEBERUNTUNGAN (1–9)</div>

        <div class="row">
          <div class="input-group">
            <label class="small"></label>
            <input class="num" type="number" id="n1" min="1" max="99" inputmode="numeric" autocomplete="one-time-code">
          </div>
          <div class="input-group">
            <label class="small"></label>
            <input class="num" type="number" id="n2" min="1" max="99" inputmode="numeric">
          </div>
          <div class="input-group">
            <label class="small"></label>
            <input class="num" type="number" id="n3" min="1" max="99" inputmode="numeric">
          </div>
          <div class="input-group">
            <label class="small"></label>
            <input class="num" type="number" id="n4" min="1" max="99" inputmode="numeric">
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="spin">SPIN HOKI</button>
          <button class="btn ghost" id="clear">RESET</button>
          <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
            <label class="small" style="color:#9aa6b2">ANIMASI</label>
            <input type="checkbox" id="useAnim" checked>
          </div>
        </div>
      </div>

      <div class="display" id="display">
        <div class="slot">—</div>
        <div class="slot">—</div>
        <div class="slot">—</div>
        <div class="slot">—</div>
      </div>

    </div>
  </div>

  <div class="modal-backdrop" id="backdrop">
    <div class="modal" id="modal">
      <div class="title">
        <div class="popup-header">
          <div class="main-title">POLA GACOR REKOMENDASI</div>
          <div class="sub-title">Hidupkan hokimu hari ini dengan panduan spin terbaik!</div>
        </div>
        <div>
          <button class="close-x" id="closeBtn">✕</button>
        </div>
      </div>

      <div class="popup-body">
        <div class="popup-left">
          <div class="pola-header">Pola Spesial Hari Ini</div>
          <div class="list" id="listArea"></div>
          <div class="disclaimer">Tips ini bertujuan untuk memberikan permainan yang lebih menyenangkan. Gunakan dengan bijak.</div>
        </div>

        <div class="popup-right">
          <div style="font-weight:900;color:var(--gold);margin-bottom:8px; font-size:14px; text-transform: uppercase;">Game Hoki Pilihan (Top 3)</div>
          <div class="games" id="gamesArea"></div>
          <div class="deposit-box">
             Kode Unik Deposit <br>
             <span class="amount" id="depositAmountDisplay">—</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // elements
    const n1 = document.getElementById('n1');
    const n2 = document.getElementById('n2');
    const n3 = document.getElementById('n3');
    const n4 = document.getElementById('n4');
    const spinBtn = document.getElementById('spin');
    const clearBtn = document.getElementById('clear');
    const display = document.getElementById('display');
    const backdrop = document.getElementById('backdrop');
    const modal = document.getElementById('modal');
    const closeBtn = document.getElementById('closeBtn');
    const listArea = document.getElementById('listArea');
    const gamesArea = document.getElementById('gamesArea');
    const useAnim = document.getElementById('useAnim');
    const depositAmountDisplay = document.getElementById('depositAmountDisplay');

    // --- DATA UTAMA: GAME DAN POLA GACOR YANG SINKRON ---
    const GAMES_DATA = [
        { name: 'Gates of Olympus', provider: 'PRAGMATIC', polas: [['❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', '✅❎❎ 30x turbo DC ON', 'Bet: 1K - 5K (Gas terus)'], ['✅❎❎ 30x turbo DC ON', '❎✅✅ 50x quick DC ON', '❎❎❎ BUY FEATURES', 'Bet: 800 - 8K (Slow Gas)'], ['❎✅✅ 50x quick DC ON', '❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', 'Bet: 1.5K - 7.5K (Gas terus)']] }, 
        { name: 'Sweet Bonanza', provider: 'PRAGMATIC', polas: [['✅❎✅ 20x turbo DC ON', '❎✅❎ 10x manual DC OFF', '❎✅✅ 50x quick DC ON', 'Bet: 500 - 2K (Slow Gas)'], ['✅❎❎ 30x turbo DC ON', '❎❎❎ BUY FEATURES', '❎✅❎ 10x manual DC OFF', 'Bet: 1.5K - 7.5K (Gas terus)'], ['❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', '✅❎❎ 30x turbo DC ON', 'Bet: 2K - 10K (Slow Gas)']] }, 
        { name: 'Starlight Princess', provider: 'PRAGMATIC', polas: [['✅❎❎ 30x turbo DC ON', '❎✅✅ 50x quick DC ON', '❎✅❎ 10x manual DC OFF', 'Bet: 400 - 4K (Gas terus)'], ['❎❎❎ BUY FEATURES', '✅❎✅ 20x turbo DC ON', '✅❎❎ 30x turbo DC ON', 'Bet: 2.5K - 25K (Slow Gas)'], ['❎✅❎ 10x manual DC OFF', '✅❎❎ 30x turbo DC ON', '❎✅✅ 50x quick DC ON', 'Bet: 1K - 8K (Gas terus)']] },
        { name: 'Power of Thor', provider: 'PRAGMATIC', polas: [['❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', '✅❎❎ 30x turbo DC ON', 'Bet: 4K - 40K (Gas terus)'], ['✅❎❎ 30x turbo DC ON', '❎✅✅ 50x quick DC ON', '❎❎❎ BUY FEATURES', 'Bet: 2K - 20K (Slow Gas)'], ['❎✅✅ 50x quick DC ON', '❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', 'Bet: 5K - 50K (Gas terus)']] },
        { name: 'Sugar Rush', provider: 'PRAGMATIC', polas: [['❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', '✅❎❎ 30x turbo DC ON', 'Bet: 1K - 10K (Gas terus)'], ['✅❎❎ 30x turbo DC ON', '❎✅✅ 50x quick DC ON', '❎❎❎ BUY FEATURES', 'Bet: 500 - 5K (Slow Gas)'], ['❎✅✅ 50x quick DC ON', '❎✅❎ 10x manual DC OFF', '✅❎✅ 20x turbo DC ON', 'Bet: 2K - 20K (Gas terus)']] },
        { name: 'Mahjong Ways', provider: 'PGSOFT', polas: [['Manual Spin 5x', 'Auto Spin 30x', 'Auto Turbo Spin 80x', 'Manual Spin 15x', 'Bet: 1K - 10K (Slow Gas)'], ['Auto Spin 30x', 'Auto Turbo Spin 80x', 'Manual Spin 15x', 'Manual Spin 5x', 'Bet: 2K - 20K (Slow Gas)'], ['Auto Turbo Spin 80x', 'Manual Spin 15x', 'Manual Spin 5x', 'Auto Spin 30x', 'Bet: 500 - 5K (Slow Gas)']] },
        { name: 'Mahjong Ways 2', provider: 'PGSOFT', polas: [['Manual Spin 15x', 'Auto Spin 30x', 'Manual Spin 5x', 'Auto Turbo Spin 80x', 'Bet: 2K - 20K (Slow Gas)'], ['Auto Spin 30x', 'Manual Spin 5x', 'Auto Turbo Spin 80x', 'Manual Spin 15x', 'Bet: 5K - 50K (Gas terus)'], ['Manual Spin 5x', 'Auto Turbo Spin 80x', 'Manual Spin 15x', 'Auto Spin 30x', 'Bet: 1K - 15K (Gas terus)']] },
        { name: 'The Great Icescape', provider: 'PGSOFT', polas: [['Manual Spin 5x', 'Auto Turbo Spin 80x', 'Auto Spin 30x', 'Manual Spin 15x', 'Bet: 500 - 5K (Slow Gas)'], ['Auto Spin 30x', 'Manual Spin 15x', 'Manual Spin 5x', 'Auto Turbo Spin 80x', 'Bet: 1K - 10K (Gas terus)'], ['Auto Turbo Spin 80x', 'Manual Spin 5x', 'Auto Spin 30x', 'Manual Spin 15x', 'Bet: 2K - 20K (Slow Gas)']] },
    ];
    // --- AKHIR DATA UTAMA ---

    // helpers
    function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    
    function pick(arr, k){
        const a = arr.slice(); 
        const out = []; 
        for(let i=0; i < k && a.length > 0; i++){
            const idx = Math.floor(Math.random() * a.length); 
            out.push(a.splice(idx, 1)[0]);
        } 
        return out;
    }

    function validNumber(v){const x = parseInt(v); return !isNaN(x) && x>=1 && x<=99}
    function readInputs(){return [n1.value,n2.value,n3.value,n4.value].map(x=>parseInt(x))}
    function formatRp(n){return 'Rp ' + n.toLocaleString('id-ID')}
    function randomDepositAmount(){return randInt(50000,350000)} 

    let gameHokiOrder = []; 

    function generateGameHokiOrder() {
        const randomGames = pick(GAMES_DATA, 3);
        const providerOrder = ['PRAGMATIC', 'PGSOFT'];

        randomGames.sort((a, b) => {
            const providerA = providerOrder.indexOf(a.provider);
            const providerB = providerOrder.indexOf(b.provider);
            
            if (providerA !== providerB) {
                return providerA - providerB;
            }
            
            return a.name.localeCompare(b.name);
        });

        return randomGames;
    }

    function buildPoints(gameHokiOrder){
        const points = [];
        const themeGames = gameHokiOrder; 
        
        for (let i = 0; i < themeGames.length; i++) {
            const game = themeGames[i];
            const title = `<div class="pola-title">${game.name}</div>`;
            const miniPolasSet = game.polas[randInt(0, game.polas.length - 1)]; 
            points.push(title, ...miniPolasSet);
        }
        
        return { points: points };
    }
    
    function displayGames(games){
        gamesArea.innerHTML = '';
        const providers = {};

        games.forEach(g => {
            if (!providers[g.provider]) {
                providers[g.provider] = [];
            }
            if (!providers[g.provider].includes(g.name)) {
                providers[g.provider].push(g.name);
            }
        });

        const providerOrder = ['PRAGMATIC', 'PGSOFT'];
        
        providerOrder.forEach(provider => {
            if (providers[provider] && providers[provider].length > 0) {
                const pDiv = document.createElement('div');
                pDiv.className = 'provider';
                pDiv.textContent = provider.toUpperCase();
                gamesArea.appendChild(pDiv);

                providers[provider].sort((a, b) => {
                    const indexA = gameHokiOrder.findIndex(g => g.name === a);
                    const indexB = gameHokiOrder.findIndex(g => g.name === b);
                    return indexA - indexB;
                });

                providers[provider].forEach(gameName => {
                    const gDiv = document.createElement('div');
                    gDiv.textContent = gameName;
                    gamesArea.appendChild(gDiv);
                });
            }
        });
    }

    function showPopupForInputs(nums){
      gameHokiOrder = generateGameHokiOrder(); 

      const { points } = buildPoints(gameHokiOrder);
      
      const listHtml = points.map(p => {
          if (p.startsWith('<div class="pola-title">')) {
              return p;
          } else {
              if(p.startsWith('Bet:')){
                  return `<div class="pola-item bet-info">${p}</div>`;
              }
              
              const match = p.match(/^([❎✅]+)\s*(.*)/);
              
              if (match) {
                  let indicator = match[1];
                  const action = match[2];

                  if (action.includes('BUY FEATURES')) {
                      return `<div class="pola-item"><span class="buy-feature">${action}</span></div>`;
                  }
                  
                  indicator = indicator.replace(/✅/g, '<span class="success">✅</span>');
                  indicator = indicator.replace(/❌/g, '<span class="danger">❌</span>');
                  
                  return `<div class="pola-item"><span class="indicator">${indicator}</span> <span class="action-text">${action}</span></div>`;
              }

              if (p.includes('Spin')) {
                  return `<div class="pola-item">${p}</div>`;
              }
              
              return `<div class="pola-item">${p}</div>`;
          }
      }).join('');
      
      listArea.innerHTML = listHtml;

      displayGames(gameHokiOrder);
      
      const depositAmt = randomDepositAmount();
      depositAmountDisplay.textContent = formatRp(depositAmt);

      backdrop.classList.add('show'); 
      setTimeout(()=>modal.classList.add('show'),40);
      confettiBurst();
    }

    function hidePopup(){
        modal.classList.remove('show'); 
        setTimeout(()=>backdrop.classList.remove('show'),300);
    }

    // spin animation
    function spinTo(nums){
      const slots = Array.from(display.querySelectorAll('.slot'));
      slots.forEach((s)=> s.textContent='...');

      if(useAnim.checked){
        spinBtn.disabled = true;
        let t=0;
        const iv = setInterval(()=>{
          slots.forEach((s)=> s.textContent = String(randInt(1, 99)));
          t++; 
          if(t>=15){ // Dibuat 15 round untuk animasi yang pasti
            clearInterval(iv); 
            slots.forEach((s,i)=>{
                s.textContent = nums[i]; 
                s.animate([{transform:'scale(0.92)'},{transform:'scale(1.05)'},{transform:'scale(1)'}],{duration:320,fill:'forwards'})
            });
            setTimeout(()=>{
                showPopupForInputs(nums);
                spinBtn.disabled = false;
            },350);
          }
        },70);
      } else {
        Array.from(display.querySelectorAll('.slot')).forEach((s,i)=> s.textContent = nums[i]);
        showPopupForInputs(nums);
      }
    }

    // events
    spinBtn.addEventListener('click', ()=>{
      const vals = readInputs();
      if(!vals.every(validNumber)){
          alert('Masukkan 4 angka valid (1–99) pada semua kolom.'); 
          return
      }
      spinTo(vals);
    });

    clearBtn.addEventListener('click', ()=>{
      n1.value=''; n2.value=''; n3.value=''; n4.value='';
      Array.from(display.querySelectorAll('.slot')).forEach(s=>s.textContent='—');
    });

    closeBtn.addEventListener('click', hidePopup);
    backdrop.addEventListener('click', (e)=>{if(e.target===backdrop) hidePopup()});

    // enable Enter key to move or spin
    const inputs = [n1,n2,n3,n4];
    inputs.forEach((el,i)=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){
          e.preventDefault(); 
          if(i<inputs.length-1) inputs[i+1].focus(); 
          else spinBtn.click();
        }
      });
    });

    // autofocus first input on load
    window.addEventListener('load', ()=>{n1.focus();});

    // confetti (visual effect)
    const confettiCanvas = document.createElement('canvas'); 
    confettiCanvas.style.position='fixed'; confettiCanvas.style.left='0'; confettiCanvas.style.top='0'; confettiCanvas.style.pointerEvents='none'; confettiCanvas.style.zIndex='9999'; 
    document.body.appendChild(confettiCanvas);
    const ctx = confettiCanvas.getContext('2d'); let particles = [];
    function resize(){confettiCanvas.width = window.innerWidth; confettiCanvas.height = window.innerHeight}
    window.addEventListener('resize', resize); resize();
    function confettiBurst(){
        particles=[]; 
        for(let i=0;i<100;i++){
            particles.push({
                x: window.innerWidth/2 + (Math.random()-0.5)*600, 
                y: window.innerHeight/3 + (Math.random()-0.5)*200, 
                vx:(Math.random()-0.5)*12, 
                vy:Math.random()*10+2, 
                w:Math.random()*12+6, 
                h:Math.random()*8+4, 
                angle:Math.random()*Math.PI*2, 
                color: ['#ffd700','#ffea80','#ffc040','#fff9e6'][Math.floor(Math.random()*4)]
            })
        } 
        requestAnimationFrame(frame); 
        setTimeout(()=>particles=[],3200)
    }
    function frame(){
        ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); 
        // Filter partikel yang masih terlihat (y < tinggi layar)
        particles = particles.filter(p => p.y < confettiCanvas.height);

        particles.forEach(p=>{
            p.x+=p.vx; p.y+=p.vy; p.vy+=0.25; p.angle+=0.12; 
            ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.angle); 
            ctx.fillStyle=p.color; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); 
            ctx.restore();
        }); 
        if(particles.length) requestAnimationFrame(frame)
    }

    // init slots
    Array.from(display.querySelectorAll('.slot')).forEach((s)=> s.textContent = '—');
  </script>
</body>
</html>